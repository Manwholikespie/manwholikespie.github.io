<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="TRANSACTIONSREWORK: So, as you may have imagined due to the fact that I still haven’t finished this damned program, there are a few problems with the ">
    

    <!--Author-->
    
        <meta name="author" content="Robert Dominguez">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="Follow the Leader Part II"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Robertism"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>Follow the Leader Part II - Robertism</title>

    <!-- Tachyons Core CSS -->
    <link rel="stylesheet" href="//unpkg.com/tachyons/css/tachyons.min.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<!-- Main Content -->
<!-- Banner -->
<!-- Banner -->
<div class="w-100 bg-1 ph5-ns ph3 text-light">
    
    <nav class="db dt-l w-100 mw8 center border-box pv3">
        <a class="db dtc-l v-mid link dim w-100 w-25-l tc tl-l mb2 mb0-l white" href="/" title="Robertism">
            <img src="https://s3-us-west-2.amazonaws.com/svgporn.com/logos/gordon.svg" class="dib h3" alt="Robertism">
        </a>
        <div class="db dtc-l v-mid w-100 w-75-l tc tr-l">
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/" 
                    title="Home">
                    Home
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/archives" 
                    title="Archives">
                    Archives
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/about" 
                    title="About">
                    About
                </a>
            
                <a class="link dim f6 f5-l dib mr3 mr4-l white" 
                    href="/contact" 
                    title="Contact">
                    Contact
                </a>
            
        </div>
    </nav>

    <!-- Title -->
    <div class="w-100 mw8 center vh-40 dt">
        <div class="dtc v-mid white">
            <h1 class="f1-l f2-m tc tc-m tl-ns">Follow the Leader Part II</h1>
            <p class="f4 fw3 pab-100px tc tc-m tl-ns">2016-06-02</p>
        </div>
    </div>

    <!-- Icon -->
    <div class="relative w-100 mw8 center white dn dn-m db-ns">
        <i class="header-icon fa fa-file-text-o"></i>
    </div>
</div>

<!-- Content -->
<div class="w-100 ph2 ph4-m ph5-l mv5 mv6-l">
    <div class="content">
        <div class="mw8 center">
            <div class="cf">
                <div class="fl w-100 w-70-l mw7 left fw3 lh-copy pr4-ns pr0-m post-content">
                    <!-- Tags Vertical -->
                    
                        <div class="tags-container-vertical">
                            <div class="tags-sub-container">
                                <a class="fw3 ph1 dib" href="/tags/python/">#python</a> <a class="fw3 ph1 dib" href="/tags/web-scraping/">#web scraping</a>
                            </div>
                        </div>
                    

                    <!-- Main Post Content -->
                    <h3 id="TRANSACTIONS"><a href="#TRANSACTIONS" class="headerlink" title="TRANSACTIONS"></a>TRANSACTIONS</h3><p><strong>REWORK</strong>: So, as you may have imagined due to the fact that I still haven’t finished this damned program, there are a few problems with the current way I am doing transactions. Mainly, there are way too many sources of error in monitoring transactions as per their list of past transactions. The sources of error mainly stem from how many things have to go perfectly in order for everything to be “okay”. Here are a few things:<br>In order to be copied, a trade has to be made in the past 5 minutes. Because I can’t always guarantee that a trade will be made in the past 5 minutes, there will be discrepancies between how a player performs in the game, and how he performs under my tutelage.<br>I can only copy trades that are in the present. If a user already has a holding (let’s say he bought Tesla a few months ago and plans on holding onto it for a while), I will not be able to enjoy the returns until he sells it and buys it again.<br>Some people have scripted their purchases, and therefore if I am monitoring 50 users, it may be 2+ minutes or so before I get to scan a user again. If a user is makes over 10 trades in this 2 minute period (a very possible scenario), they will scroll of the page of the most recent transactions and I will not see them– leading to another discrepancy.</p>
<p>So what is my solution? I believe it is smarter to look at holdings rather than transaction history. Then, I can find the ∆ value between holdings at different time periods. Example:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">John’s Holdings @<span class="number">10</span>:<span class="number">30</span>AM = &#123;</div><div class="line">	‘AAPL Buy’ : <span class="number">100</span>,</div><div class="line">	‘GOOG Short’ : <span class="number">100</span>,</div><div class="line">	‘TSLA Buy’ : <span class="number">100</span>,</div><div class="line">	‘NKE Short’ : <span class="number">100</span></div><div class="line">&#125;</div><div class="line"></div><div class="line">John’s Holdings @<span class="number">10</span>:<span class="number">35</span>AM = &#123;</div><div class="line">	‘GOOG Short’ : <span class="number">200</span>,</div><div class="line">	‘TSLA Buy’ : <span class="number">50</span>,</div><div class="line">	‘NKE Short’ : <span class="number">100</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="WHAT-NEEDS-TO-HAPPEN"><a href="#WHAT-NEEDS-TO-HAPPEN" class="headerlink" title="WHAT NEEDS TO HAPPEN:"></a>WHAT NEEDS TO HAPPEN:</h3><p>Make a function that returns the difference between two dictionaries like the ones seen above.<br>Make a function that creates a dictionary based on current holdings.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">exampleFunc</span><span class="params">(inputUrl)</span>:</span></div><div class="line">	<span class="comment"># request and parse holdings page</span></div><div class="line">	<span class="comment"># build dictionary of holdings</span></div><div class="line">	<span class="keyword">return</span> &#123;<span class="string">'NKE Buy'</span>: <span class="number">581</span>, <span class="string">'SONC Buy'</span>: <span class="number">943</span>&#125; <span class="comment"># example output dictionary</span></div></pre></td></tr></table></figure>
<p>Make a function that reads a pickle file to find the holdings of our last scan<br>Make a function that finds the difference between the two dictionaries, and returns those stocks that have changed and the amount to which they have changed.<br>If there has been a change in the holdings, make the necessary changes to our own holdings, and update the pickle file to respect the report of his latest holdings.<br>Else if the dictionaries are the same, leave the pickle file and start scanning another user (or just sleep and prepare to scan again in a little while).</p>
<h3 id="RATIOS"><a href="#RATIOS" class="headerlink" title="RATIOS"></a>RATIOS</h3><p><strong>REWORK</strong>:<br>Yay! This weekend’s changes have been completely implemented, meaning that I can now copy the transactions of a given user. There are a few problems– more with the system than the program– that need to be addressed, however. I will get to those later. As for now, there is another important thing that needs to be done: implementing ratios.</p>
<p>I plan on changing this a lot, meaning that may need to import these settings from a yaml file or something of the sort. I say yaml because I want a dictionary-type file that is easy for the user to edit and understand. Until I can add these “settings”, there are two main things that need to be done:</p>
<p>Given a file with a list of user-holding-URLs, I need to be able to count the amount of users that we care about. I also need to be able to of course read the urls.<br>“amountOfUsers” is important, as it shall be required for the primary ratio:<br><code>(1 / amountOfUsers )</code>  </p>
<p>This formula is used in the formula:<br><code>amountToBuy = (1 / amountOfUsers ) * ((myNetWorth/hisNetworth) * inputAmount))</code><br>However, this variable should be as a global when the program is first initiated, as I don’t want to read the file everytime I make a trade.</p>
<p>###RANKING<br><strong>REWORK</strong>:<br>Alright, so it seems to be that what was done yesterday is working well now. However, there are a few other changes that need to be made if I am to get that “99.9%” efficiency that I was talking about earlier. One of those things is that I have to make some changes to the ranking algorithms so that the players, are of course, better. Here is a list of things that have to be done…</p>
<p>For players that have the same name, only keep the one that has the higher mmScore. This is to prevent people like Tom Riddle from taking 14 of the top 50 places in my ranking system<br>Remove duplicate names from the top 250 before cutting it down to 50.<br>There should be some stackoverflow answers on how to do this inside the pandas dataframe. Probably a combination of the list(), and set() functions would also work on the list of names. I may have to put it in an xrange() loop in order for it to remember the placement of the name among the other users in the ranking system.<br>As of now, there are players in the system that either:  </p>
<ol>
<li>hardly make any trades or profit at all, or…</li>
<li>hardly ever have any holdings on their person.</li>
</ol>
<p>This needs to be fixed probably in the 250 —&gt; 50 merge, as I will not be able to look at the performance of 500 players in a short amount of time. This will most likely have to be a new function that is able to deduce a crap-ton of data from the performanceURL alone… And I thought I was almost done…<br>Most of the work in this section will be fairly simple boolean operands, in which I can see if the user had any holdings on a particular day, and their percent returns for that day. What I am mainly looking for is if they made any trades in a given week… I don’t think it really stores this data (at least not in the performance section), though, so I might have to just count up the amount of times in a given week on their transactions page.<br>Set up the system that finds the difference between the “top 50” list for two given days (today and tomorrow– because remember, we’re scanning at ~5:00PM), and returns a list of users that need to be added, and a list of users that need to have all of their holdings sold.</p>

                    
                    <!-- Tags Bottom -->
                    
                        <div class="tags-container-bottom">
                            <i class="fa fa-tag pr3 text-main-color"></i><a class="fw3 ph1 dib" href="/tags/python/">#python</a> <a class="fw3 ph1 dib" href="/tags/web-scraping/">#web scraping</a>
                        </div>
                    

                    <!-- Comments -->
                    



                </div>
                <div class="fl w-100 w-30-l center fw3 lh-copy pl4-ns tl black-50">
                    
                    <hr class="dn-l mw4 black-50 mt5" />
                    
                    <!-- Widget 1: About -->
                    <div class="mt5 mt0-l">
    <article class="dt db-l mw8 mw8-m mw5-ns center ml0-l bg-white mv3">
        <div class="dn dtc-m db-l v-mid tc pr4 pr0-l" style="min-width: 6rem;">
            <img src="https://avatars3.githubusercontent.com/u/6274589" class="mb4-l br-100 h3 w3 h4-l w4-l dib" title="Robert Dominguez">
        </div>
        <div class="dtc db-l v-mid lh-copy measure center f6 black-50 tj">
            Greetings und achtung, my dear child. Welcome to Robertism.
        </div>
    </article>
</div>

                    <hr class="dn-l mw4 black-50 mt5" />
                    
                    <!-- Widget 2: Categories -->
                    

                    <!-- Widget 3: Recent Posts -->
                    <div class="mt5 tc tl-l">
    <h3>Recent Posts</h3>
    
        <p>
            <a href="/2017/10/09/Moesaic-Part-I/">Moesaic Part I</a>
        </p>
    
        <p>
            <a href="/2017/02/09/Queria-Part-I/">Queria Part I</a>
        </p>
    
        <p>
            <a href="/2016/12/19/Follow-the-Leader-Part-V/">Follow the Leader Part V</a>
        </p>
    
        <p>
            <a href="/2016/11/22/Follow-the-Leader-Part-IV/">Follow the Leader Part IV</a>
        </p>
    
        <p>
            <a href="/2016/10/05/Follow-the-Leader-Part-III/">Follow the Leader Part III</a>
        </p>
    
</div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- Footer -->
<div class="bg-1 ph2 ph5-ns pv5">
        <div class="mv8">
            <div class="center tc">
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://twitter.com/thelordrobert" target="_blank">
                            <i class="fa fa-twitter"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="https://github.com/Manwholikespie" target="_blank">
                            <i class="fa fa-github"></i>
                        </a>
                    </div>
                
                    <div class="dib mh3">
                        <a class="f3 f2-ns white dim" href="mailto:robert@robertism.com" target="_blank">
                            <i class="fa fa-envelope"></i>
                        </a>
                    </div>
                
            </div>
            <div class="f6 f5-ns center tc white pt5 fw3">
                @Manwholikespie. All right reserved
            </div>
        </div>
    </div>

<!-- After Footer -->
<!-- Disqus Comments -->



</body>

</html>